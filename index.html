<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Sozeefaüòç</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;600&display=swap');

        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #ffe4e1;
            font-family: 'Poppins', sans-serif;
            overflow: hidden; /* Prevents background scrolling */
            transition: background-color 1s ease;
        }

        /* The Main Card */
        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 400px;
            position: relative;
            z-index: 10;
        }

        .gif-area {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .gif-area video {
            width: 100%;
            max-width: 250px;
            height: auto;
            border-radius: 10px;
            object-fit: cover;
            pointer-events: none;
        }

        h1 {
            color: #ff4d6d;
            font-size: 26px;
            margin: 20px 0;
            line-height: 1.4;
        }

        .btn-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
            position: relative;
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            transition: transform 0.2s, background 0.3s;
            position: relative; 
        }

        #yesBtn { background-color: #ff4d6d; z-index: 20; }
        #yesBtn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ff4d6d80; }
        #noBtn { background-color: #333; }
        
        #noteTriggerBtn {
            background-color: #fff;
            color: #ff4d6d;
            border: 2px solid #ff4d6d;
            margin-top: 20px;
            display: none; 
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .absolute-move {
            position: fixed !important;
            transition: left 0.1s ease, top 0.1s ease;
            z-index: 15;
        }

        .hidden { display: none; }

        /* --- ROMANTIC NOTE STYLES (Fixed for Scrolling) --- */
        #noteOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        #noteOverlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .note-paper {
            background: #fff9f0;
            width: 85%;
            max-width: 500px;
            /* SCROLL FIXES START HERE */
            max-height: 80vh; /* Limits height to 80% of screen */
            overflow-y: auto; /* Adds scrollbar if text is too long */
            /* SCROLL FIXES END HERE */
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            position: relative;
            transform: translateY(20px);
            transition: transform 1s ease;
            display: flex;
            flex-direction: column;
        }
        
        #noteOverlay.active .note-paper {
            transform: translateY(0);
        }

        .note-text {
            font-family: 'Dancing Script', cursive;
            font-size: 22px; 
            color: #4a4a4a;
            line-height: 1.6;
            min-height: 100px;
            white-space: pre-wrap;
            text-align: left; 
        }

        .signature {
            margin-top: 30px;
            text-align: right;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            color: #888;
            opacity: 0;
            transition: opacity 1s;
        }

        /* Scrollbar styling for a cleaner look */
        .note-paper::-webkit-scrollbar {
            width: 8px;
        }
        .note-paper::-webkit-scrollbar-track {
            background: #f1f1f1; 
            border-radius: 5px;
        }
        .note-paper::-webkit-scrollbar-thumb {
            background: #ffb7b2; 
            border-radius: 5px;
        }

        @media (max-width: 480px) {
            h1 { font-size: 22px; }
            button { padding: 10px 20px; font-size: 16px; }
            .note-text { font-size: 18px; }
        }
    </style>
</head>
<body>

    <div class="card" id="mainCard">
        <div id="question">
            <div class="gif-area">
                <video autoplay loop muted playsinline>
                    <source src="VID-20260202-WA0006.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <h1>Sozeefa, will you be my valentine?</h1>
            <div class="btn-container">
                <button id="yesBtn">Yes üíñ</button>
                <button id="noBtn">No</button>
            </div>
        </div>
        
        <div id="success" class="hidden">
            <div class="gif-area">
                <video autoplay loop muted playsinline>
                    <source src="VID-20260202-WA0007.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <h1>YAY! üíñ</h1>
            <button id="noteTriggerBtn">I wrote something for you... üíå</button>
        </div>
    </div>

    <div id="noteOverlay">
        <div class="note-paper">
            <div class="note-text" id="typewriterText"></div>
            <div class="signature" id="signature">- Yours, Always</div>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/10/05/audio_6861a49f70.mp3?filename=piano-moment-119614.mp3" type="audio/mpeg">
    </audio>

    <script>
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const questionDiv = document.getElementById('question');
        const successDiv = document.getElementById('success');
        const noteTriggerBtn = document.getElementById('noteTriggerBtn');
        const noteOverlay = document.getElementById('noteOverlay');
        const typewriterText = document.getElementById('typewriterText');
        const signature = document.getElementById('signature');
        const bgMusic = document.getElementById('bgMusic');

        const romanticMessage = `My Dearest Sozeefüòòü´Ä,

I created this little animation just to see you smile, but the truth is, no amount of code could ever capture what you actually mean to me.

You are my quiet in the chaos. In a world that is always so loud, you are the only place where my heart feels at rest. Loving you doesn't feel like falling; it feels like finally coming home.

There is a couplet in Urdu that explains my heart better than I ever could:

"Tere ehsaas ki khushboo rag-e-jaan mein samayi hai,
Ab tu hi bata, tujhe main yaad karoon ya saans loon?"

(Your essence is woven into my very soul... 
So tell me, do I remember you, or do I just breathe?)

I choose you. Not just for today, but for all the boring days, the hard days, and the beautiful days to come. 

Happy Valentine's Day. You are the poetry I never knew how to write. ‚ù§Ô∏è`;

        function moveButton() {
            noBtn.classList.add('absolute-move');
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            const randomX = Math.random() * (viewportWidth - btnWidth - 40) + 20; 
            const randomY = Math.random() * (viewportHeight - btnHeight - 40) + 20;
            noBtn.style.left = `${randomX}px`;
            noBtn.style.top = `${randomY}px`;
        }

        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('click', (e) => { e.preventDefault(); moveButton(); });
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveButton(); }, { passive: false });

        yesBtn.addEventListener('click', () => {
            questionDiv.classList.add('hidden');
            successDiv.classList.remove('hidden');
            
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            setTimeout(() => { confetti({ particleCount: 100, spread: 100, origin: { y: 0.6 } }); }, 500);

            setTimeout(() => {
                noteTriggerBtn.style.display = 'inline-block';
            }, 2000);
        });

        noteTriggerBtn.addEventListener('click', () => {
            noteOverlay.classList.add('active');
            bgMusic.volume = 0.3; 
            bgMusic.play().catch(e => console.log("Audio play failed usually due to browser permissions"));
            
            setTimeout(typeWriter, 1000);
        });

        let i = 0;
        function typeWriter() {
            if (i < romanticMessage.length) {
                typewriterText.innerHTML += romanticMessage.charAt(i);
                i++;
                setTimeout(typeWriter, Math.random() * 50 + 30);
            } else {
                signature.style.opacity = '1';
                // Optional: Scroll to bottom automatically when done
                const paper = document.querySelector('.note-paper');
                paper.scrollTo({ top: paper.scrollHeight, behavior: 'smooth' });
            }
        }
    </script>
</body>
</html>
